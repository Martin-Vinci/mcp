"use strict";(self.webpackChunkmatx=self.webpackChunkmatx||[]).push([[458],{9458:(Jt,O,r)=>{r.r(O),r.d(O,{WebcashModule:()=>Ot});var d=r(69808),p=r(30325);class y{}var Z=r(23213),_=r(24850),v=r(24766),e=r(5e3),Y=r(40520);let b=(()=>{class i{constructor(t,a){this.router=t,this.http=a}findAllCreditApplications(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/findAllCreditApplications`,t).pipe((0,_.U)(a=>a))}creditApplication(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/creditApplication`,t).pipe((0,_.U)(a=>a))}approveLoan(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/approveLoan`,t).pipe((0,_.U)(a=>a))}findLoanAccounts(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/findLoanAccount`,t).pipe((0,_.U)(a=>a))}findLoanSchedule(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/findLoanSchedule`,t).pipe((0,_.U)(a=>a))}disburseLoan(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/disburseLoan`,t).pipe((0,_.U)(a=>a))}postLoanRepayment(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/postLoanRepayment`,t).pipe((0,_.U)(a=>a))}findTransHistory(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/findTransHistory`,t).pipe((0,_.U)(a=>a))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(p.F0),e.LFG(Y.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var f=r(87224),q=r(69071),m=r(45330),g=r(59783),T=r(28061),h=r(81058);function F(i,n){1&i&&(e.TgZ(0,"tr",14),e.TgZ(1,"th"),e._uU(2,"ID #"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Customer Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Credit Type"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Amount"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Term"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Period"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Status"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Create Date"),e.qZA(),e.qZA())}function R(i,n){if(1&i&&(e.TgZ(0,"tr",15),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"date"),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.creditType),e.xp6(2),e.Oqu(t.applAmt),e.xp6(2),e.Oqu(t.repayTerm),e.xp6(2),e.Oqu(t.repayPeriod),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Oqu(e.lcZ(17,9,t.createDate))}}function V(i,n){1&i&&e._UZ(0,"span",16)}let Q=(()=>{class i{constructor(t,a,s,l,c,u){this.router=t,this.storageService=a,this.alertService=s,this.dialogService=l,this.messageService=c,this.globalService=u,this.customerType=[],this.loading=[!1,!1,!1,!1]}ngOnInit(){this.onSearch()}onSearch(){let t=new y;t.status="PENDING",this.loading[0]=!0,this.globalService.findAllCreditApplications(t).pipe((0,f.P)()).subscribe(a=>{this.loading[0]=!1,"00"===a.code?this.data=a.data:this.alertService.displayError(a.message)},a=>{this.loading[0]=!1,this.alertService.displayError(a)})}onEdit(){null!=this.selectedData?(console.log(this.selectedData),this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/credit-appl","Edit"])):this.alertService.displayInfo("No record has been selected")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0),e.Y36(q.V),e.Y36(Z.c),e.Y36(m.xA),e.Y36(g.ez),e.Y36(b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-credit-applic-approval"]],decls:17,vars:7,consts:[["header","Credit Applications"],[1,"form-row","form-group"],[1,"col-md-12","text-right"],[1,"btn","btn-success","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-pencil"],["routerLink","/dashboard/analytics",1,"btn","btn-danger","btn-sm","mr-1","mb-1"],[1,"fa","fa-times"],[1,"col-12"],["styleClass","p-datatable-sm mt-1 prime-ng-table","responsiveLayout","scroll","selectionMode","single","dataKey","id","responsiveLayout","scroll",3,"value","paginator","rows","responsive","selection","loading","selectionChange"],["pTemplate","header"],["pTemplate","body"],[1,"form-row"],[1,"col-sm-12","text-center"],["style","color: blue;","class","spinner-border spinner-border-sm mr-1 text-center",4,"ngIf"],[2,"font-size","12px"],[2,"font-size","12px",3,"pSelectableRow"],[1,"spinner-border","spinner-border-sm","mr-1","text-center",2,"color","blue"]],template:function(t,a){1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return a.onEdit()}),e._UZ(4,"i",4),e._uU(5," Details "),e.qZA(),e.TgZ(6,"button",5),e._UZ(7,"i",6),e._uU(8," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",1),e.TgZ(10,"div",7),e.TgZ(11,"p-table",8),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(12,F,17,0,"ng-template",9),e.YNc(13,R,18,11,"ng-template",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.YNc(16,V,1,0,"span",13),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("value",a.data)("paginator",!0)("rows",50)("responsive",!0)("selection",a.selectedData)("loading",a.loading[0]),e.xp6(5),e.Q6J("ngIf",a.loading[0]))},directives:[T.s,p.rH,h.iA,g.jx,h.Ei,d.O5],pipes:[d.uU],styles:[""]}),i})();var o=r(93075),I=r(77117),J=r(28144),B=r(57413);let w=(()=>{class i{constructor(t,a){this.router=t,this.http=a}findAllCustomers(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/findAllCustomers`,t).pipe((0,_.U)(a=>a))}signUp(t){return this.http.post(`${v.N.apiBackEndUrl}/webcash/signUp`,t).pipe((0,_.U)(a=>a))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(p.F0),e.LFG(Y.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=r(40845);function $(i,n){1&i&&(e.TgZ(0,"tr",18),e.TgZ(1,"th"),e._uU(2,"Customer #"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"First Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Last Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Phone #"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Status"),e.qZA(),e.qZA())}function z(i,n){if(1&i&&(e.TgZ(0,"tr",19),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.firstName),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.phoneNo),e.xp6(2),e.Oqu(t.status)}}function K(i,n){1&i&&e._UZ(0,"span",20)}const j=function(){return[50,100,150]};let G=(()=>{class i{constructor(t,a,s,l,c,u){this.alertService=t,this.fb=a,this.dialogService=s,this.ref=l,this.config=c,this.customerRefService=u,this.customerType=[],this.loading=[!1,!1,!1,!1]}ngOnInit(){this.createForms()}createForms(){this.form=this.fb.group({id:[null],firstName:[null],phoneNo:[null],lastName:[null]})}onSearch(){this.loading[0]=!0,this.customerRefService.findAllCustomers(this.form.value).pipe((0,f.P)()).subscribe(t=>{this.loading[0]=!1,"00"===t.code?this.data=t.data:this.alertService.displayError(t.message)},t=>{this.loading[0]=!1,this.alertService.displayError(t)})}cancel(){this.ref.close(!1)}submit(){this.ref.close(this.selectedData)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.c),e.Y36(o.qu),e.Y36(m.xA),e.Y36(m.E7),e.Y36(m.S),e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-modal-customer-search"]],decls:27,vars:10,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"col-md-3"],["formControlName","firstName","type","text","placeholder","First Name.",1,"form-control"],["formControlName","phoneNo","type","text","placeholder","First Name",1,"form-control"],["formControlName","lastName","type","text","placeholder","Middle Name",1,"form-control"],[1,"form-row"],[1,"offset-sm-3","col-sm-9","text-right"],["label","Search","styleClass","p-button-success p-button-sm","icon","pi pi-search",3,"loading","onClick"],["label","Select","styleClass","p-button-success p-button-sm","icon","pi pi-check",3,"onClick"],["label","Close","styleClass","p-button-danger p-button-sm","icon","pi pi-times",3,"onClick"],[1,"form-group","form-row"],[1,"col-sm-12"],["styleClass","p-datatable-sm mt-3 ml-2 mr-2","responsiveLayout","scroll","selectionMode","single","dataKey","id","responsiveLayout","scroll",3,"value","paginator","rows","rowsPerPageOptions","responsive","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],[1,"col-sm-12","text-center"],["style","color: blue;","class","spinner-border spinner-border-sm mr-1 text-center",4,"ngIf"],[2,"font-size","13px"],[2,"font-size","13px",3,"pSelectableRow"],[1,"spinner-border","spinner-border-sm","mr-1","text-center",2,"color","blue"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label"),e._uU(4,"First Name."),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"label"),e._uU(8,"Middle Name"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div",2),e.TgZ(11,"label"),e._uU(12,"Last Name"),e.qZA(),e._UZ(13,"input",5),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"div",7),e.TgZ(16,"p-button",8),e.NdJ("onClick",function(){return a.onSearch()}),e.qZA(),e.TgZ(17,"p-button",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.TgZ(18,"p-button",10),e.NdJ("onClick",function(){return a.cancel()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",11),e.TgZ(20,"div",12),e.TgZ(21,"p-table",13),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(22,$,11,0,"ng-template",14),e.YNc(23,z,11,6,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",6),e.TgZ(25,"div",16),e.YNc(26,K,1,0,"span",17),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",a.form),e.xp6(16),e.Q6J("loading",a.loading[0]),e.xp6(5),e.Q6J("value",a.data)("paginator",!0)("rows",50)("rowsPerPageOptions",e.DdM(9,j))("responsive",!0)("selection",a.selectedData),e.xp6(5),e.Q6J("ngIf",a.loading[0]))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,M.zx,h.iA,g.jx,h.Ei,d.O5],styles:[""]}),i})();var H=r(52069),A=r(67322),N=r(77531),C=r(86856),S=r(74107),D=r(90508);function X(i,n){if(1&i&&(e.TgZ(0,"div",32),e.TgZ(1,"div",33),e.TgZ(2,"label",34),e._uU(3,"First Name."),e.qZA(),e.qZA(),e.TgZ(4,"div",35),e.TgZ(5,"label",36),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",33),e.TgZ(8,"label",34),e._uU(9,"Last Name."),e.qZA(),e.qZA(),e.TgZ(10,"div",35),e.TgZ(11,"label",36),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.customer.firstName),e.xp6(6),e.Oqu(t.customer.lastName)}}function W(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function ee(i,n){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,W,2,1,"div",38),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("applAmt").hasError(t.type))}}function te(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function ie(i,n){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,te,2,1,"div",38),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("startDate").hasError(t.type))}}function ae(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function ne(i,n){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,ae,2,1,"div",38),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("repayTerm").hasError(t.type))}}function se(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function oe(i,n){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,se,2,1,"div",38),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("repayPeriod").hasError(t.type))}}function re(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function le(i,n){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,re,2,1,"div",38),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("endDate").hasError(t.type))}}function ce(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function ue(i,n){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,ce,2,1,"div",38),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("loanPurpose").hasError(t.type))}}function de(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function pe(i,n){if(1&i&&(e.TgZ(0,"div",37),e.YNc(1,de,2,1,"div",38),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("status").hasError(t.type))}}function me(i,n){1&i&&e._UZ(0,"span",41)}function he(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e.YNc(1,me,1,0,"span",40),e._uU(2," Save "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading[0]),e.xp6(1),e.Q6J("ngIf",t.loading[0])}}function fe(i,n){1&i&&e._UZ(0,"span",41)}function ge(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReview("ACTIVE")}),e.YNc(1,fe,1,0,"span",40),e._uU(2," Approve "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading[1]),e.xp6(1),e.Q6J("ngIf",t.loading[1])}}function Ze(i,n){1&i&&e._UZ(0,"span",41)}function Ae(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReview("DECLINED")}),e.YNc(1,Ze,1,0,"span",40),e._uU(2," Decline "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading[1]),e.xp6(1),e.Q6J("ngIf",t.loading[1])}}let _e=(()=>{class i{constructor(t,a,s,l,c,u,x,U,L){this.route=t,this.alertService=a,this.fb=s,this.navigation=l,this.securityService=c,this.customerAPI=u,this.storageService=x,this.dialogService=U,this.date=L,this.loading=[!1,!1,!1,!1,!1],this.submitted=!1,this.customerName=!1,this.selectedData=new y,this.isEdit=!1,this.isView=!1,this.isAddMode=!1,this.enableApprove=!1,this.statusPickList=[],this.categories=[],this.validation_messages={applAmt:[{type:"required",message:"Credit amount\xa0is\xa0required"}],startDate:[{type:"required",message:"Start date\xa0is\xa0required"}],endDate:[{type:"required",message:"End date\xa0is\xa0required"}],repayTerm:[{type:"required",message:"Term\xa0is\xa0required"}],repayPeriod:[{type:"required",message:"Frequency\xa0is\xa0required"}],purpose:[{type:"required",message:"Purpose\xa0is\xa0required"}],status:[{type:"required",message:"Status\xa0is\xa0required"}]}}ngOnInit(){this.action=this.route.snapshot.params.id,this.prepareFormBasedOnAction(),this.createForm(),0==this.isAddMode&&this.findEntityData()}ngOnDestroy(){this.storageService.closeEntity()}prepareFormBasedOnAction(){return"Add"==this.action?(this.isAddMode=!0,void this.onGetCustNo()):("View"==this.action&&(this.isView=!0,this.selectedData=this.storageService.getEntity(),this.isAddMode=!this.selectedData),"Edit"==this.action?(this.isEdit=!0,this.selectedData=this.storageService.getEntity(),this.isAddMode=!this.selectedData,void("PENDING"==this.selectedData.status.toUpperCase()&&(this.enableApprove=!0))):void 0)}onGetCustNo(){this.ref=this.dialogService.open(G,{header:"Search Customer",width:"50%"}),this.ref.onClose.subscribe(t=>{t&&(this.customer=t,this.customerName=!0,this.f.custId.setValue(t.id))})}assignSelectedCustomerId(t){this.f.custId.setValue(t.id)}createForm(){this.form=this.fb.group({id:null,creditType:["MOBILE_LOAN",o.kI.required],startDate:[null,o.kI.required],endDate:null,repayTerm:[null,o.kI.required],repayPeriod:[null,o.kI.required],nextPmtAmt:null,status:"PENDING",custId:null,loanPurpose:null,createdBy:this.securityService.currentUser.userName,modifiedBy:null,modifiedDate:null,rowVersion:0,applAmt:[null,o.kI.required]})}get f(){return this.form.controls}determineMaturityDate(){console.log("========================= "+this.f.startDate.value);let t=this.date.isoDateString(this.f.startDate.value),a=this.f.repayPeriod.value,s=this.f.repayTerm.value;null==t||null==a||null==s||this.f.endDate.setValue(this.date.getNextPeriodDate((0,B.parse)(t.toString()),a,s))}findEntityData(){console.log(this.selectedData),this.f.id.setValue(this.selectedData.id),this.f.creditType.setValue(this.selectedData.creditType),this.f.startDate.setValue(this.selectedData.startDate),this.f.endDate.setValue(this.selectedData.endDate),this.f.repayTerm.setValue(this.selectedData.repayTerm),this.f.repayPeriod.setValue(this.selectedData.repayPeriod),this.f.nextPmtAmt.setValue(this.selectedData.nextPmtAmt),this.f.status.setValue(this.selectedData.status.toUpperCase()),this.f.custId.setValue(this.selectedData.custId),this.f.createdBy.setValue(this.selectedData.createdBy),this.f.applAmt.setValue(this.selectedData.applAmt),this.f.loanPurpose.setValue(this.selectedData.loanPurpose)}onSubmit(){if(this.submitted=!0,this.form.invalid)return this.alertService.displayInfo("Please fill all the fields"),void(this.loading[0]=!1);this.loading[0]=!0,this.customerAPI.creditApplication(this.prepareSubmitData()).pipe((0,f.P)()).subscribe(t=>{this.loading[0]=!1,"00"===t.code?(this.alertService.displaySuccess("Record Saved Successfully"),this.submitted=!1,this.onClose()):this.alertService.displayError(t.message)},t=>{this.loading[0]=!1,this.submitted=!1,this.alertService.displayError(t)})}onReview(t){if(this.submitted=!0,this.form.invalid)return this.alertService.displayInfo("Please fill all the fields"),void(this.loading[1]=!1);this.loading[1]=!0;let a=this.prepareSubmitData();a.status=t,this.customerAPI.approveLoan(a).pipe((0,f.P)()).subscribe(s=>{console.log(s),this.loading[1]=!1,"00"===s.code?(this.alertService.displaySuccess("Record Saved Successfully"),this.submitted=!1,this.onClose()):this.alertService.displayError(s.message)},s=>{this.loading[1]=!1,this.submitted=!1,this.alertService.displayError(s)})}prepareSubmitData(){let t=new y;return t.id=this.f.id.value,t.creditType=this.f.creditType.value,t.startDate=this.date.isoDateString(this.f.startDate.value),t.endDate=this.date.isoDateString(this.f.endDate.value),t.repayTerm=this.f.repayTerm.value,t.repayPeriod=this.f.repayPeriod.value,t.status=this.f.status.value,t.custId=this.f.custId.value,t.createdBy=this.f.createdBy.value,t.loanPurpose=this.f.loanPurpose.value,t.applAmt=this.f.applAmt.value,t}onClose(){this.navigation.goBack()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(Z.c),e.Y36(o.qu),e.Y36(H.F),e.Y36(J.I),e.Y36(b),e.Y36(q.V),e.Y36(m.xA),e.Y36(I.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-credit-applic-maintain"]],decls:69,vars:15,consts:[["header","Credit Application"],[3,"formGroup","ngSubmit"],["class","form-group form-row",4,"ngIf"],[1,"form-row"],[1,"col-sm-6"],["appearance","outline"],["matInput","","type","number","autocomplete","off","formControlName","applAmt"],["class","required-error",4,"ngFor","ngForOf"],["appearance","outline","appDateFormat",""],["matInput","","formControlName","startDate",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["startDatePicker",""],[1,"col-sm-4"],["matInput","","type","number","autocomplete","off","formControlName","repayTerm",3,"keyup"],["required","","formControlName","repayPeriod",3,"selectionChange"],["value","DAY"],["value","WEEK"],["value","MONTH"],["readonly","","appearance","outline"],["readonly","","matInput","","formControlName","endDate",3,"matDatepicker"],["readonly",""],["endDateDatePicker",""],["matInput","","autocomplete","off","formControlName","loanPurpose"],["readonly","","matInput","","autocomplete","off","formControlName","status"],[1,"container"],[1,"row","form-group"],[1,"col-md-12","text-right"],["style","width: 80px;","class","btn mr-1 mb-1 btn-primary btn-sm btn-border","type","button",3,"disabled","click",4,"ngIf"],["style","width: 80px;","class","btn mr-1 mb-1 btn-success btn-sm btn-border","type","button",3,"disabled","click",4,"ngIf"],["style","width: 80px;","class","btn mr-1 mb-1 btn-danger btn-sm btn-border","type","button",3,"disabled","click",4,"ngIf"],["type","button","type","button",1,"btn","btn-danger","btn-sm","mr-1","mb-1",2,"width","90px",3,"click"],[1,"fa","fa-times"],[1,"form-group","form-row"],[1,"col-md-2"],[2,"font-size","13px"],[1,"col-md-3"],[2,"font-size","13px","color","blue"],[1,"required-error"],[4,"ngIf"],["type","button",1,"btn","mr-1","mb-1","btn-primary","btn-sm","btn-border",2,"width","80px",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"],["type","button",1,"btn","mr-1","mb-1","btn-success","btn-sm","btn-border",2,"width","80px",3,"disabled","click"],["type","button",1,"btn","mr-1","mb-1","btn-danger","btn-sm","btn-border",2,"width","80px",3,"disabled","click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.YNc(2,X,13,2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"mat-form-field",5),e.TgZ(6,"mat-label"),e._uU(7,"Credit Amount."),e.qZA(),e._UZ(8,"input",6),e.YNc(9,ee,2,1,"div",7),e.qZA(),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"mat-form-field",8),e.TgZ(12,"mat-label"),e._uU(13,"Start date"),e.qZA(),e.TgZ(14,"input",9),e.NdJ("dateChange",function(){return a.determineMaturityDate()}),e.qZA(),e._UZ(15,"mat-datepicker-toggle",10),e._UZ(16,"mat-datepicker",null,11),e.YNc(18,ie,2,1,"div",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",3),e.TgZ(20,"div",12),e.TgZ(21,"mat-form-field",5),e.TgZ(22,"mat-label"),e._uU(23,"Term"),e.qZA(),e.TgZ(24,"input",13),e.NdJ("keyup",function(){return a.determineMaturityDate()}),e.qZA(),e.YNc(25,ne,2,1,"div",7),e.qZA(),e.qZA(),e.TgZ(26,"div",12),e.TgZ(27,"mat-form-field",5),e.TgZ(28,"mat-label"),e._uU(29,"Frequency"),e.qZA(),e.TgZ(30,"mat-select",14),e.NdJ("selectionChange",function(){return a.determineMaturityDate()}),e.TgZ(31,"mat-option",15),e._uU(32,"DAY"),e.qZA(),e.TgZ(33,"mat-option",16),e._uU(34,"WEEK"),e.qZA(),e.TgZ(35,"mat-option",17),e._uU(36,"MONTH"),e.qZA(),e.qZA(),e.YNc(37,oe,2,1,"div",7),e.qZA(),e.qZA(),e.TgZ(38,"div",12),e.TgZ(39,"mat-form-field",18),e.TgZ(40,"mat-label"),e._uU(41,"End date"),e.qZA(),e._UZ(42,"input",19),e._UZ(43,"mat-datepicker",20,21),e.YNc(45,le,2,1,"div",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",3),e.TgZ(47,"div",12),e.TgZ(48,"mat-form-field",5),e.TgZ(49,"mat-label"),e._uU(50,"Purpose."),e.qZA(),e._UZ(51,"input",22),e.YNc(52,ue,2,1,"div",7),e.qZA(),e.qZA(),e.TgZ(53,"div",12),e.TgZ(54,"mat-form-field",5),e.TgZ(55,"mat-label"),e._uU(56,"Status"),e.qZA(),e._UZ(57,"input",23),e.YNc(58,pe,2,1,"div",7),e.qZA(),e.qZA(),e.qZA(),e._UZ(59,"hr"),e.TgZ(60,"div",24),e.TgZ(61,"div",25),e.TgZ(62,"div",26),e.YNc(63,he,3,2,"button",27),e.YNc(64,ge,3,2,"button",28),e.YNc(65,Ae,3,2,"button",29),e.TgZ(66,"button",30),e.NdJ("click",function(){return a.onClose()}),e._UZ(67,"i",31),e._uU(68," Close "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=e.MAs(17),l=e.MAs(44);e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("ngIf",a.customerName),e.xp6(7),e.Q6J("ngForOf",a.validation_messages.applAmt),e.xp6(5),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(3),e.Q6J("ngForOf",a.validation_messages.startDate),e.xp6(7),e.Q6J("ngForOf",a.validation_messages.repayTerm),e.xp6(12),e.Q6J("ngForOf",a.validation_messages.repayPeriod),e.xp6(5),e.Q6J("matDatepicker",l),e.xp6(3),e.Q6J("ngForOf",a.validation_messages.endDate),e.xp6(7),e.Q6J("ngForOf",a.validation_messages.purpose),e.xp6(6),e.Q6J("ngForOf",a.validation_messages.status),e.xp6(5),e.Q6J("ngIf",!a.isView&&!a.enableApprove),e.xp6(1),e.Q6J("ngIf",a.enableApprove),e.xp6(1),e.Q6J("ngIf",a.enableApprove)}},directives:[T.s,o._Y,o.JL,o.sg,d.O5,A.KE,A.hX,N.Nt,o.wV,o.Fj,o.JJ,o.u,d.sg,C.hl,C.nW,A.R9,C.Mq,S.gD,o.Q7,D.ey],styles:[""]}),i})();function ve(i,n){1&i&&(e.TgZ(0,"tr",15),e.TgZ(1,"th"),e._uU(2,"ID #"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Customer Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Credit Type"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Amount"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Term"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Period"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Status"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Create Date"),e.qZA(),e.qZA())}function Te(i,n){if(1&i&&(e.TgZ(0,"tr",16),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"date"),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.customerName),e.xp6(2),e.Oqu(t.creditType),e.xp6(2),e.Oqu(t.applAmt),e.xp6(2),e.Oqu(t.repayTerm),e.xp6(2),e.Oqu(t.repayPeriod),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Oqu(e.lcZ(17,9,t.createDate))}}let be=(()=>{class i{constructor(t,a,s,l,c,u){this.router=t,this.storageService=a,this.alertService=s,this.dialogService=l,this.messageService=c,this.globalService=u,this.customerType=[],this.loading=[!1,!1,!1,!1]}ngOnInit(){this.onSearch()}onSearch(){let t=new y;t.status="ACTIVE",this.loading[0]=!0,this.globalService.findAllCreditApplications(t).pipe((0,f.P)()).subscribe(a=>{this.loading[0]=!1,"00"===a.code?this.data=a.data:this.alertService.displayError(a.message)},a=>{this.loading[0]=!1,this.alertService.displayError(a)})}onAdd(){this.router.navigate(["webcash/credit-appl","Add"])}onView(){null!=this.selectedData?(this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/credit-appl","View"])):this.alertService.displayInfo("No record has been selected")}onEdit(){null!=this.selectedData?(this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/credit-appl","Edit"])):this.alertService.displayInfo("No record has been selected")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0),e.Y36(q.V),e.Y36(Z.c),e.Y36(m.xA),e.Y36(g.ez),e.Y36(b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-credit-applic-search"]],decls:20,vars:6,consts:[["header","Credit Applications"],[1,"form-row","form-group"],[1,"col-md-12","text-right"],[1,"btn","btn-warning","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-eye"],[1,"btn","btn-success","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-primary","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-plus"],["routerLink","/dashboard/analytics",1,"btn","btn-danger","btn-sm","mr-1","mb-1"],[1,"fa","fa-times"],[1,"col-12"],["styleClass","p-datatable-sm mt-1 prime-ng-table","responsiveLayout","scroll","selectionMode","single","dataKey","id","responsiveLayout","scroll",3,"value","paginator","rows","responsive","selection","loading","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"font-size","12px"],[2,"font-size","12px",3,"pSelectableRow"]],template:function(t,a){1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return a.onView()}),e._UZ(4,"i",4),e._uU(5," View "),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.onEdit()}),e._UZ(7,"i",6),e._uU(8," Edit "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return a.onAdd()}),e._UZ(10,"i",8),e._uU(11," Add "),e.qZA(),e.TgZ(12,"button",9),e._UZ(13,"i",10),e._uU(14," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",11),e.TgZ(17,"p-table",12),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(18,ve,17,0,"ng-template",13),e.YNc(19,Te,18,11,"ng-template",14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(17),e.Q6J("value",a.data)("paginator",!0)("rows",50)("responsive",!0)("selection",a.selectedData)("loading",a.loading[0]))},directives:[T.s,p.rH,h.iA,g.jx,h.Ei],pipes:[d.uU],styles:[""]}),i})();class k{}function qe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function Ce(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,qe,2,1,"div",39),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("firstName").hasError(t.type))}}function ye(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function Ne(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,ye,2,1,"div",39),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("lastName").hasError(t.type))}}function xe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function Ue(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,xe,2,1,"div",39),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("title").hasError(t.type))}}function Se(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function De(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Se,2,1,"div",39),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("birthDt").hasError(t.type))}}function Ie(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function we(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Ie,2,1,"div",39),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("idNo").hasError(t.type))}}function Me(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function Ee(i,n){1&i&&(e.TgZ(0,"span",38),e._uU(1,"Please enter valid Mobile Phone No (256770000000)."),e.qZA())}function Le(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Me,2,1,"div",39),e.YNc(2,Ee,2,0,"span",40),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("phoneNo").hasError(t.type)),e.xp6(1),e.Q6J("ngIf",a.f.phoneNo.hasError("pattern"))}}function Oe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function Ye(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Oe,2,1,"div",39),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("maritalStatus").hasError(t.type))}}function Je(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function ke(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Je,2,1,"div",39),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("businessType").hasError(t.type))}}function Pe(i,n){1&i&&e._UZ(0,"span",44)}function Fe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e.YNc(1,Pe,1,0,"span",42),e._UZ(2,"i",43),e._uU(3," Save "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("ngIf",t.loading)}}let Re=(()=>{class i{constructor(t,a,s,l,c,u){this.route=t,this.router=a,this.alertService=s,this.fb=l,this.customerAPI=c,this.storageService=u,this.loading=!1,this.submitted=!1,this.isEdit=!1,this.isView=!1,this.isAddMode=!1,this.statusPickList=[],this.categories=[],this.validation_messages={firstName:[{type:"required",message:"First Name\xa0is\xa0required"}],lastName:[{type:"required",message:"Last Name\xa0is\xa0required"}],title:[{type:"required",message:"Title\xa0is\xa0required"}],status:[{type:"required",message:"Status\xa0is\xa0required"}],occupation:[{type:"required",message:"Occupation\xa0is\xa0required"}],birthDt:[{type:"required",message:"Birth date\xa0is\xa0required"}],placeOfResidence:[{type:"required",message:"Place of residence\xa0is\xa0required"}],maritalStatus:[{type:"required",message:"Marital status\xa0is\xa0required"}],businessType:[{type:"required",message:"Business type\xa0is\xa0required"}],nextOfKinName:[{type:"required",message:"Next of Kin name\xa0is\xa0required"}],nextOfKinAddress:[{type:"required",message:"Next of Kin Address\xa0is\xa0required"}],phoneNo:[{type:"required",message:"Phone number\xa0is\xa0required"}],idNo:[{type:"required",message:"ID number\xa0is\xa0required"}]}}ngOnInit(){this.action=this.route.snapshot.params.id,this.initializeSubMenus(),this.prepareFormBasedOnAction(),this.createForm(),0==this.isAddMode&&this.findEntityData()}ngOnDestroy(){}prepareFormBasedOnAction(){"Add"==this.action?this.isAddMode=!0:"View"==this.action?(this.isView=!0,this.selectedData=this.storageService.getEntity(),this.isAddMode=!this.selectedData):"Edit"==this.action&&(this.isEdit=!0,this.selectedData=this.storageService.getEntity(),this.isAddMode=!this.selectedData)}initializeSubMenus(){this.items=[{label:"Menu",items:[{label:"Default Products",icon:"pi pi-search",routerLink:"/customer/customer-address-search"},{label:"Contact Mode",icon:"pi pi-phone",routerLink:"/customer/customer-contact-search"}]}]}createForm(){this.form=this.fb.group({id:null,firstName:[null,o.kI.required],middleName:null,lastName:[null,o.kI.required],title:[null,o.kI.required],status:["Active",o.kI.required],occupation:[null,o.kI.required],emailAddress:null,latitudes:null,longitudes:null,rowVersion:0,birthDt:[null,o.kI.required],placeOfResidence:[null,o.kI.required],fcsNo:null,maritalStatus:[null,o.kI.required],businessType:[null,o.kI.required],idType:null,idNo:[null,o.kI.required],nextOfKinName:[null,o.kI.required],nextOfKinAddress:[null,o.kI.required],gps:null,phoneNo:[null,o.kI.compose([o.kI.required,o.kI.pattern(/^(\d{12}|\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3}))$/)])],createDate:"2022-01-01",createBy:"GP0001",modifiedDate:null,modifiedBy:null,password:null,edit:!1})}get f(){return this.form.controls}findEntityData(){this.f.id.setValue(this.selectedData.id),this.f.firstName.setValue(this.selectedData.firstName.trim()),this.f.middleName.setValue(this.selectedData.middleName),this.f.lastName.setValue(this.selectedData.lastName.trim()),this.f.title.setValue(this.selectedData.title.trim()),this.f.status.setValue(this.selectedData.status.trim()),this.f.occupation.setValue(this.selectedData.occupation.trim()),this.f.emailAddress.setValue(this.selectedData.emailAddress.trim()),this.f.latitudes.setValue(this.selectedData.latitudes),this.f.longitudes.setValue(this.selectedData.longitudes),this.f.rowVersion.setValue(this.selectedData.rowVersion),this.f.birthDt.setValue(this.selectedData.birthDt),this.f.placeOfResidence.setValue(this.selectedData.placeOfResidence.trim()),this.f.fcsNo.setValue(this.selectedData.fcsNo),this.f.maritalStatus.setValue(this.selectedData.maritalStatus.trim()),this.f.businessType.setValue(this.selectedData.businessType.trim()),this.f.idType.setValue(this.selectedData.idType),this.f.idNo.setValue(this.selectedData.idNo.trim()),this.f.nextOfKinName.setValue(this.selectedData.nextOfKinName),this.f.nextOfKinAddress.setValue(this.selectedData.nextOfKinAddress),this.f.gps.setValue(this.selectedData.gps),this.f.phoneNo.setValue(this.selectedData.phoneNo.trim()),this.f.createBy.setValue(this.selectedData.createBy),this.f.createDate.setValue(this.selectedData.createDate),this.f.password.setValue(this.selectedData.password),this.f.edit.setValue(!0)}onSubmit(){if(this.submitted=!0,this.form.invalid)return this.alertService.displayInfo("Please fill all the fields"),void(this.loading=!1);this.loading=!0,this.customerAPI.signUp(this.prepareSubmitData()).pipe((0,f.P)()).subscribe(t=>{this.loading=!1,"00"===t.code?(this.alertService.displaySuccess("Record Saved Successfully"),this.submitted=!1,this.onClose()):this.alertService.displayError(t.message)},t=>{this.loading=!1,this.submitted=!1,this.alertService.displayError(t)})}prepareSubmitData(){let t=new k;return t.id=this.f.id.value,t.firstName=this.f.firstName.value,t.middleName=this.f.middleName.value,t.lastName=this.f.lastName.value,t.title=this.f.title.value,t.status=this.f.status.value,t.occupation=this.f.occupation.value,t.emailAddress=this.f.emailAddress.value,t.latitudes=this.f.latitudes.value,t.longitudes=this.f.longitudes.value,t.rowVersion=this.f.rowVersion.value,t.birthDt=this.f.birthDt.value,t.placeOfResidence=this.f.placeOfResidence.value,t.fcsNo=this.f.fcsNo.value,t.maritalStatus=this.f.maritalStatus.value,t.businessType=this.f.businessType.value,t.idType=this.f.idType.value,t.idNo=this.f.idNo.value,t.nextOfKinName=this.f.nextOfKinName.value,t.nextOfKinAddress=this.f.nextOfKinAddress.value,t.gps=this.f.gps.value,t.phoneNo=this.f.phoneNo.value,t.createBy=this.f.createBy.value,t.createDate=this.f.createDate.value,t.password=this.f.password.value,t.edit=this.f.edit.value,t}onClose(){this.router.navigate(["webcash/customer-search"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(Z.c),e.Y36(o.qu),e.Y36(w),e.Y36(q.V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer-maintain"]],decls:120,vars:12,consts:[["header","Customer Details"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-sm-3"],["appearance","outline"],["matInput","","autocomplete","off","formControlName","firstName"],["class","required-error",4,"ngFor","ngForOf"],["matInput","","autocomplete","off","formControlName","middleName"],["matInput","","autocomplete","off","formControlName","lastName"],["formControlName","title"],["value","Dr"],["value","Mr"],["value","Mrs"],["value","Miss"],["matInput","","formControlName","birthDt",3,"matDatepicker"],["matSuffix","",3,"for"],["endDatePicker",""],["matInput","","autocomplete","off","formControlName","idNo"],["matInput","","autocomplete","off","formControlName","phoneNo"],["matInput","","autocomplete","off","formControlName","fcsNo"],["matInput","","autocomplete","off","formControlName","emailAddress"],["matInput","","autocomplete","off","formControlName","occupation"],["matInput","","autocomplete","off","formControlName","nextOfKinName"],["matInput","","autocomplete","off","formControlName","nextOfKinAddress"],["matInput","","autocomplete","off","formControlName","placeOfResidence"],["formControlName","maritalStatus"],["value","SINGLE"],["value","MARRIED"],["formControlName","businessType"],["value","SOLE_PROPRIETORSHIP"],["value","PARTNERSHIP"],["value","LTD_LIABILITY_CO"],["value","CORPORATION"],["value","NONE"],[1,"col-md-12","text-right"],["class","btn btn-primary btn-sm mr-1 mb-1","style","width: 90px;",3,"disabled","click",4,"ngIf"],["type","button","type","button",1,"btn","btn-danger","btn-sm","mr-1","mb-1",2,"width","90px",3,"click"],[1,"fa","fa-times"],[1,"required-error"],[4,"ngIf"],["class","required-error",4,"ngIf"],[1,"btn","btn-primary","btn-sm","mr-1","mb-1",2,"width","90px",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"fa","fa-check"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,a){if(1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"mat-form-field",4),e.TgZ(5,"mat-label"),e._uU(6,"First Name"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,Ce,2,1,"div",6),e.qZA(),e.qZA(),e.TgZ(9,"div",3),e.TgZ(10,"mat-form-field",4),e.TgZ(11,"mat-label"),e._uU(12,"Middle Name"),e.qZA(),e._UZ(13,"input",7),e.qZA(),e.qZA(),e.TgZ(14,"div",3),e.TgZ(15,"mat-form-field",4),e.TgZ(16,"mat-label"),e._uU(17,"Last Name"),e.qZA(),e._UZ(18,"input",8),e.YNc(19,Ne,2,1,"div",6),e.qZA(),e.qZA(),e.TgZ(20,"div",3),e.TgZ(21,"mat-form-field",4),e.TgZ(22,"mat-label"),e._uU(23,"Title"),e.qZA(),e.TgZ(24,"mat-select",9),e.TgZ(25,"mat-option",10),e._uU(26,"Dr"),e.qZA(),e.TgZ(27,"mat-option",11),e._uU(28,"Mr"),e.qZA(),e.TgZ(29,"mat-option",12),e._uU(30,"Mrs"),e.qZA(),e.TgZ(31,"mat-option",13),e._uU(32,"Miss"),e.qZA(),e.qZA(),e.YNc(33,Ue,2,1,"div",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",2),e.TgZ(35,"div",3),e.TgZ(36,"mat-form-field",4),e.TgZ(37,"mat-label"),e._uU(38,"Birth Date:"),e.qZA(),e._UZ(39,"input",14),e._UZ(40,"mat-datepicker-toggle",15),e._UZ(41,"mat-datepicker",null,16),e.YNc(43,De,2,1,"div",6),e.qZA(),e.qZA(),e.TgZ(44,"div",3),e.TgZ(45,"mat-form-field",4),e.TgZ(46,"mat-label"),e._uU(47,"ID #"),e.qZA(),e._UZ(48,"input",17),e.YNc(49,we,2,1,"div",6),e.qZA(),e.qZA(),e.TgZ(50,"div",3),e.TgZ(51,"mat-form-field",4),e.TgZ(52,"mat-label"),e._uU(53,"Mobile Phone"),e.qZA(),e._UZ(54,"input",18),e.YNc(55,Le,3,2,"div",6),e.qZA(),e.qZA(),e.TgZ(56,"div",3),e.TgZ(57,"mat-form-field",4),e.TgZ(58,"mat-label"),e._uU(59,"FCS Number"),e.qZA(),e._UZ(60,"input",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",2),e.TgZ(62,"div",3),e.TgZ(63,"mat-form-field",4),e.TgZ(64,"mat-label"),e._uU(65,"Email address"),e.qZA(),e._UZ(66,"input",20),e.qZA(),e.qZA(),e.TgZ(67,"div",3),e.TgZ(68,"mat-form-field",4),e.TgZ(69,"mat-label"),e._uU(70,"Occupation"),e.qZA(),e._UZ(71,"input",21),e.qZA(),e.qZA(),e.TgZ(72,"div",3),e.TgZ(73,"mat-form-field",4),e.TgZ(74,"mat-label"),e._uU(75,"NextOfKin Name"),e.qZA(),e._UZ(76,"input",22),e.qZA(),e.qZA(),e.TgZ(77,"div",3),e.TgZ(78,"mat-form-field",4),e.TgZ(79,"mat-label"),e._uU(80,"NextOfKin Address"),e.qZA(),e._UZ(81,"input",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(82,"div",2),e.TgZ(83,"div",3),e.TgZ(84,"mat-form-field",4),e.TgZ(85,"mat-label"),e._uU(86,"Place of Residence"),e.qZA(),e._UZ(87,"input",24),e.qZA(),e.qZA(),e.TgZ(88,"div",3),e.TgZ(89,"mat-form-field",4),e.TgZ(90,"mat-label"),e._uU(91,"Marital Status"),e.qZA(),e.TgZ(92,"mat-select",25),e.TgZ(93,"mat-option",26),e._uU(94,"SINGLE"),e.qZA(),e.TgZ(95,"mat-option",27),e._uU(96,"MARRIED"),e.qZA(),e.qZA(),e.YNc(97,Ye,2,1,"div",6),e.qZA(),e.qZA(),e.TgZ(98,"div",3),e.TgZ(99,"mat-form-field",4),e.TgZ(100,"mat-label"),e._uU(101,"Business Type"),e.qZA(),e.TgZ(102,"mat-select",28),e.TgZ(103,"mat-option",29),e._uU(104,"SOLE_PROPRIETORSHIP"),e.qZA(),e.TgZ(105,"mat-option",30),e._uU(106,"PARTNERSHIP"),e.qZA(),e.TgZ(107,"mat-option",31),e._uU(108,"LTD_LIABILITY_CO"),e.qZA(),e.TgZ(109,"mat-option",32),e._uU(110,"CORPORATION"),e.qZA(),e.TgZ(111,"mat-option",33),e._uU(112,"NONE"),e.qZA(),e.qZA(),e.YNc(113,ke,2,1,"div",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(114,"div",2),e.TgZ(115,"div",34),e.YNc(116,Fe,4,2,"button",35),e.TgZ(117,"button",36),e.NdJ("click",function(){return a.onClose()}),e._UZ(118,"i",37),e._uU(119," Close "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=e.MAs(42);e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(7),e.Q6J("ngForOf",a.validation_messages.firstName),e.xp6(11),e.Q6J("ngForOf",a.validation_messages.lastName),e.xp6(14),e.Q6J("ngForOf",a.validation_messages.title),e.xp6(6),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(3),e.Q6J("ngForOf",a.validation_messages.birthDt),e.xp6(6),e.Q6J("ngForOf",a.validation_messages.idNo),e.xp6(6),e.Q6J("ngForOf",a.validation_messages.phoneNo),e.xp6(42),e.Q6J("ngForOf",a.validation_messages.maritalStatus),e.xp6(16),e.Q6J("ngForOf",a.validation_messages.businessType),e.xp6(3),e.Q6J("ngIf",!a.isView)}},directives:[T.s,o._Y,o.JL,o.sg,A.KE,A.hX,N.Nt,o.Fj,o.JJ,o.u,d.sg,d.O5,S.gD,D.ey,C.hl,C.nW,A.R9,C.Mq],styles:[""]}),i})();function Ve(i,n){1&i&&(e.TgZ(0,"tr",15),e.TgZ(1,"th"),e._uU(2,"ID #"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"First Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Last Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"ID Number"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Mobile Phone"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Status"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Create Date"),e.qZA(),e.qZA())}function Qe(i,n){if(1&i&&(e.TgZ(0,"tr",16),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.firstName),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.idNo),e.xp6(2),e.Oqu(t.phoneNo),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Oqu(e.lcZ(15,8,t.createDate))}}let Be=(()=>{class i{constructor(t,a,s,l,c,u){this.router=t,this.storageService=a,this.alertService=s,this.dialogService=l,this.messageService=c,this.globalService=u,this.customerType=[],this.loading=[!1,!1,!1,!1]}ngOnInit(){this.onSearch()}onSearch(){let t=new k;this.loading[0]=!0,this.globalService.findAllCustomers(t).pipe((0,f.P)()).subscribe(a=>{this.loading[0]=!1,"00"===a.code?this.data=a.data:this.alertService.displayError(a.message)},a=>{this.loading[0]=!1,this.alertService.displayError(a)})}onAdd(){this.router.navigate(["webcash/customer","Add"])}onView(){null!=this.selectedData?(this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/customer","View"])):this.alertService.displayInfo("No record has been selected")}onEdit(){null!=this.selectedData?(this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/customer","Edit"])):this.alertService.displayInfo("No record has been selected")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0),e.Y36(q.V),e.Y36(Z.c),e.Y36(m.xA),e.Y36(g.ez),e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer-search"]],decls:20,vars:6,consts:[["header","Webcash Customers"],[1,"form-row","form-group"],[1,"col-md-12","text-right"],[1,"btn","btn-warning","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-eye"],[1,"btn","btn-success","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-primary","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-plus"],["routerLink","/dashboard/analytics",1,"btn","btn-danger","btn-sm","mr-1","mb-1"],[1,"fa","fa-times"],[1,"col-12"],["styleClass","p-datatable-sm mt-1 prime-ng-table","responsiveLayout","scroll","selectionMode","single","dataKey","id","responsiveLayout","scroll",3,"value","paginator","rows","responsive","selection","loading","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"font-size","12px"],[2,"font-size","12px",3,"pSelectableRow"]],template:function(t,a){1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return a.onView()}),e._UZ(4,"i",4),e._uU(5," View "),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.onEdit()}),e._UZ(7,"i",6),e._uU(8," Edit "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return a.onAdd()}),e._UZ(10,"i",8),e._uU(11," Add "),e.qZA(),e.TgZ(12,"button",9),e._UZ(13,"i",10),e._uU(14," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",11),e.TgZ(17,"p-table",12),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(18,Ve,15,0,"ng-template",13),e.YNc(19,Qe,16,10,"ng-template",14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(17),e.Q6J("value",a.data)("paginator",!0)("rows",50)("responsive",!0)("selection",a.selectedData)("loading",a.loading[0]))},directives:[T.s,p.rH,h.iA,g.jx,h.Ei],pipes:[d.uU],styles:[""]}),i})();class P{}class $e{}function ze(i,n){1&i&&(e.TgZ(0,"tr",14),e.TgZ(1,"th"),e._uU(2,"Schedule #"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Due Date"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Principal"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Interest"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Total Amount"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Amount Paid"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Amount Unpaid"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Status"),e.qZA(),e.qZA())}function Ke(i,n){if(1&i&&(e.TgZ(0,"tr",15),e.TgZ(1,"td",16),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",17),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",17),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",17),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td",17),e._uU(15),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",17),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.scheduleNo),e.xp6(2),e.Oqu(t.dueDate),e.xp6(2),e.Oqu(e.xi3(7,9,t.principalAmount,".2")),e.xp6(3),e.Oqu(e.xi3(10,12,t.interestAmount,".2")),e.xp6(3),e.Oqu(e.xi3(13,15,t.totalAmount,".2")),e.xp6(3),e.Oqu(e.xi3(16,18,t.amountPaid,".2")),e.xp6(3),e.Oqu(e.xi3(19,21,t.amountUnPaid,".2")),e.xp6(3),e.Oqu(t.status)}}function je(i,n){1&i&&e._UZ(0,"span",18)}let Ge=(()=>{class i{constructor(t,a,s,l,c,u){this.alertService=t,this.fb=a,this.dialogService=s,this.ref=l,this.config=c,this.customerRefService=u,this.loading=[!1,!1,!1,!1]}ngOnInit(){this.filter=this.config.data,this.onSearch(),this.getTotalPrincipal()}onSearch(){this.loading[0]=!0;let t=new $e;t.loanId=this.filter.loanId,this.customerRefService.findLoanSchedule(t).pipe((0,f.P)()).subscribe(a=>{this.loading[0]=!1,"00"===a.code?this.data=a.data:this.alertService.displayError(a.message)},a=>{this.loading[0]=!1,this.alertService.displayError(a)})}getTotalPrincipal(){}calculateThisYearTotal(){let t=0;for(let a of this.data)t+=a.principalAmount;this.totalPrincipal=t}cancel(){this.ref.close(!1)}submit(){this.ref.close(this.selectedData)}exportExcel(){r.e(574).then(r.bind(r,80574)).then(t=>{const s={Sheets:{data:t.utils.json_to_sheet(this.data)},SheetNames:["data"]},l=t.write(s,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(l,this.filter.loanNumber+"-loan-schedules")})}saveAsExcelFile(t,a){r.e(592).then(r.t.bind(r,94327,23)).then(s=>{const u=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});s.saveAs(u,a+"_export_"+(new Date).getTime()+".xlsx")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.c),e.Y36(o.qu),e.Y36(m.xA),e.Y36(m.E7),e.Y36(m.S),e.Y36(b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-modal-loan-schedule"]],decls:17,vars:4,consts:[[1,"form-row","form-group"],[1,"col-md-12","text-right"],[1,"btn","btn-primary","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-file-excel-o"],["type","button",1,"btn","btn-danger","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-times"],[1,"form-group","form-row"],[1,"col-sm-12"],["styleClass","p-datatable-sm mt-3","responsiveLayout","scroll","selectionMode","single","dataKey","id","responsiveLayout","scroll",3,"value","responsive","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],[1,"form-row"],[1,"col-sm-12","text-center"],["style","color: blue;","class","spinner-border spinner-border-sm mr-1 text-center",4,"ngIf"],[2,"font-size","13px"],[2,"font-size","13px",3,"pSelectableRow"],[2,"width","10px"],[1,"text-right"],[1,"spinner-border","spinner-border-sm","mr-1","text-center",2,"color","blue"]],template:function(t,a){1&t&&(e.TgZ(0,"form"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.exportExcel()}),e._UZ(4,"i",3),e._uU(5,"Export"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return a.cancel()}),e._UZ(7,"i",5),e._uU(8," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"p-table",8),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(12,ze,17,0,"ng-template",9),e.YNc(13,Ke,22,24,"ng-template",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.YNc(16,je,1,0,"span",13),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("value",a.data)("responsive",!0)("selection",a.selectedData),e.xp6(5),e.Q6J("ngIf",a.loading[0]))},directives:[o._Y,o.JL,o.F,h.iA,g.jx,h.Ei,d.O5],pipes:[d.JJ],styles:[""]}),i})();function He(i,n){if(1&i&&(e.TgZ(0,"div",27),e.TgZ(1,"div",28),e.TgZ(2,"label",29),e._uU(3,"First Name."),e.qZA(),e.qZA(),e.TgZ(4,"div",30),e.TgZ(5,"label",31),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"label",29),e._uU(9,"Last Name."),e.qZA(),e.qZA(),e.TgZ(10,"div",30),e.TgZ(11,"label",31),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.customer.firstName),e.xp6(6),e.Oqu(t.customer.lastName)}}function Xe(i,n){1&i&&e._UZ(0,"span",33)}function We(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().disburseLoan()}),e.YNc(1,Xe,1,0,"span",26),e._uU(2," Disburse "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("ngIf",t.loading)}}function et(i,n){1&i&&e._UZ(0,"span",33)}let tt=(()=>{class i{constructor(t,a,s,l,c,u,x,U){this.route=t,this.router=a,this.alertService=s,this.fb=l,this.customerAPI=c,this.storageService=u,this.dialogService=x,this.date=U,this.loading=!1,this.submitted=!1,this.customerName=!1,this.selectedData=new P,this.isEdit=!1,this.isView=!1,this.isAddMode=!1,this.enableDisburse=!1,this.statusPickList=[],this.categories=[]}ngOnInit(){this.action=this.route.snapshot.params.id,this.prepareFormBasedOnAction(),this.createForm(),0==this.isAddMode&&this.findEntityData()}ngOnDestroy(){this.storageService.closeEntity()}prepareFormBasedOnAction(){if("View"==this.action&&(this.isView=!0,this.selectedData=this.storageService.getEntity(),this.isAddMode=!this.selectedData),"Edit"==this.action)return this.isEdit=!0,this.selectedData=this.storageService.getEntity(),this.isAddMode=!this.selectedData,void("PENDING"==this.selectedData.status.toUpperCase()&&(this.enableDisburse=!0))}onGetSchedules(){this.ref=this.dialogService.open(Ge,{header:"Loan Schedules",width:"60%",data:this.selectedData}),this.ref.onClose.subscribe(t=>{t&&(this.customer=t,this.customerName=!0,this.f.custId.setValue(t.id))})}createForm(){this.form=this.fb.group({loanId:null,loanNumber:null,creditApplId:null,approvedAmount:null,startDate:null,endDate:null,repayInterest:null,repayPrincipal:null,term:null,repayPeriod:null,status:null,createdBy:null,createDate:null,creditNumber:null,custId:null,custName:null})}get f(){return this.form.controls}findEntityData(){this.f.loanId.setValue(this.selectedData.loanId),this.f.approvedAmount.setValue(this.selectedData.approvedAmount),this.f.loanNumber.setValue(this.selectedData.loanNumber),this.f.startDate.setValue(this.selectedData.startDate),this.f.endDate.setValue(this.selectedData.endDate),this.f.term.setValue(this.selectedData.term),this.f.repayPeriod.setValue(this.selectedData.repayPeriod),this.f.status.setValue(this.selectedData.status.toUpperCase()),this.f.custId.setValue(this.selectedData.custId),this.f.createdBy.setValue(this.selectedData.createdBy),this.f.createDate.setValue(this.selectedData.createDate)}disburseLoan(){if(this.submitted=!0,this.form.invalid)return this.alertService.displayInfo("Please fill all the fields"),void(this.loading=!1);this.loading=!0,this.customerAPI.disburseLoan(this.selectedData).pipe((0,f.P)()).subscribe(t=>{this.loading=!1,"00"===t.code?(this.alertService.displaySuccess("Record Saved Successfully"),this.submitted=!1,this.onClose()):this.alertService.displayError(t.message)},t=>{this.loading=!1,this.submitted=!1,this.alertService.displayError(t)})}prepareSubmitData(){let t=new y;return t.id=this.f.id.value,t.creditType=this.f.creditType.value,t.startDate=this.f.startDate.value,t.endDate=this.f.endDate.value,t.repayTerm=this.f.repayTerm.value,t.repayPeriod=this.f.repayPeriod.value,t.nextPmtAmt=this.f.nextPmtAmt.value,t.status=this.f.status.value,t.custId=this.f.custId.value,t.createdBy=this.f.createdBy.value,t.createDate=this.f.createDate.value,t.rowVersion=this.f.rowVersion.value,t.applAmt=this.f.applAmt.value,t}onClose(){this.router.navigate(["webcash/loan-account-search"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(Z.c),e.Y36(o.qu),e.Y36(b),e.Y36(q.V),e.Y36(m.xA),e.Y36(I.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-loan-account-maintain"]],decls:55,vars:6,consts:[["header","Loan Account Details"],[3,"formGroup"],["class","form-group form-row",4,"ngIf"],[1,"form-row"],[1,"col-sm-4"],["appearance","outline"],["matInput","","readonly","","inputmode","numeric","autocomplete","off","formControlName","approvedAmount"],["appearance","outline","appDateFormat",""],["matInput","","readonly","","formControlName","startDate",3,"matDatepicker"],["startDatePicker",""],["matInput","","readonly","","inputmode","numeric","autocomplete","off","formControlName","term"],["readonly","","required","","formControlName","repayPeriod"],["value","DAY"],["value","WEEK"],["value","MONTH"],["readonly","","appearance","outline"],["readonly","","matInput","","formControlName","endDate",3,"matDatepicker"],["readonly",""],["endDateDatePicker",""],["readonly","","matInput","","autocomplete","off","formControlName","status"],[1,"container"],[1,"row","form-group"],[1,"col-md-12","text-right"],["type","button",1,"btn","mr-1","mb-1","btn-primary","btn-sm","btn-border",2,"width","80px",3,"click"],["style","width: 80px;","class","btn mr-1 mb-1 btn-success btn-sm btn-border","type","button",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","mr-1","mb-1","btn-danger","btn-sm","btn-border",2,"width","80px",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"form-group","form-row"],[1,"col-md-2"],[2,"font-size","13px"],[1,"col-md-3"],[2,"font-size","13px","color","blue"],["type","button",1,"btn","mr-1","mb-1","btn-success","btn-sm","btn-border",2,"width","80px",3,"disabled","click"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,a){if(1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"form",1),e.YNc(2,He,13,2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"mat-form-field",5),e.TgZ(6,"mat-label"),e._uU(7,"Loan Amount."),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"mat-form-field",7),e.TgZ(11,"mat-label"),e._uU(12,"Start date"),e.qZA(),e._UZ(13,"input",8),e._UZ(14,"mat-datepicker",null,9),e.qZA(),e.qZA(),e.TgZ(16,"div",4),e.TgZ(17,"mat-form-field",5),e.TgZ(18,"mat-label"),e._uU(19,"Term"),e.qZA(),e._UZ(20,"input",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",3),e.TgZ(22,"div",4),e.TgZ(23,"mat-form-field",5),e.TgZ(24,"mat-label"),e._uU(25,"Frequency"),e.qZA(),e.TgZ(26,"mat-select",11),e.TgZ(27,"mat-option",12),e._uU(28,"DAY"),e.qZA(),e.TgZ(29,"mat-option",13),e._uU(30,"WEEK"),e.qZA(),e.TgZ(31,"mat-option",14),e._uU(32,"MONTH"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",4),e.TgZ(34,"mat-form-field",15),e.TgZ(35,"mat-label"),e._uU(36,"End date"),e.qZA(),e._UZ(37,"input",16),e._UZ(38,"mat-datepicker",17,18),e.qZA(),e.qZA(),e.TgZ(40,"div",4),e.TgZ(41,"mat-form-field",5),e.TgZ(42,"mat-label"),e._uU(43,"Status"),e.qZA(),e._UZ(44,"input",19),e.qZA(),e.qZA(),e.qZA(),e._UZ(45,"hr"),e.TgZ(46,"div",20),e.TgZ(47,"div",21),e.TgZ(48,"div",22),e.TgZ(49,"button",23),e.NdJ("click",function(){return a.onGetSchedules()}),e._uU(50," Schedules "),e.qZA(),e.YNc(51,We,3,2,"button",24),e.TgZ(52,"button",25),e.NdJ("click",function(){return a.onClose()}),e.YNc(53,et,1,0,"span",26),e._uU(54," Close "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=e.MAs(15),l=e.MAs(39);e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("ngIf",a.customerName),e.xp6(11),e.Q6J("matDatepicker",s),e.xp6(24),e.Q6J("matDatepicker",l),e.xp6(14),e.Q6J("ngIf",a.enableDisburse),e.xp6(2),e.Q6J("ngIf",a.loading)}},directives:[T.s,o._Y,o.JL,o.sg,d.O5,A.KE,A.hX,N.Nt,o.Fj,o.JJ,o.u,C.hl,C.Mq,S.gD,o.Q7,D.ey],styles:[""]}),i})();function it(i,n){1&i&&(e.TgZ(0,"tr",15),e.TgZ(1,"th"),e._uU(2,"ID #"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Loan Number"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Ledger Balance"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Start Date"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"End Date"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Next Payment Amount"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Next Payment Date"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Term"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Repayment Period"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Status"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Create Date"),e.qZA(),e.qZA())}function at(i,n){if(1&i&&(e.TgZ(0,"tr",16),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.ALo(24,"date"),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.loanId),e.xp6(2),e.Oqu(t.loanNumber),e.xp6(2),e.Oqu(t.ledgerBal),e.xp6(2),e.Oqu(t.startDate),e.xp6(2),e.Oqu(t.endDate),e.xp6(2),e.Oqu(e.xi3(13,12,t.nextPmtAmount,".2")),e.xp6(3),e.Oqu(t.nextPmtDate),e.xp6(2),e.Oqu(t.term),e.xp6(2),e.Oqu(t.repayPeriod),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Oqu(e.lcZ(24,15,t.createDate))}}let nt=(()=>{class i{constructor(t,a,s,l,c,u){this.router=t,this.storageService=a,this.alertService=s,this.dialogService=l,this.messageService=c,this.globalService=u,this.customerType=[],this.loading=[!1,!1,!1,!1]}ngOnInit(){this.onSearch()}onSearch(){let t=new P;this.loading[0]=!0,this.globalService.findLoanAccounts(t).pipe((0,f.P)()).subscribe(a=>{this.loading[0]=!1,"00"===a.code?this.data=a.data:this.alertService.displayError(a.message)},a=>{this.loading[0]=!1,this.alertService.displayError(a)})}onAdd(){this.router.navigate(["webcash/loan-account","Add"])}onView(){null!=this.selectedData?(this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/loan-account","View"])):this.alertService.displayInfo("No record has been selected")}onEdit(){null!=this.selectedData?(this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/loan-account","Edit"])):this.alertService.displayInfo("No record has been selected")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0),e.Y36(q.V),e.Y36(Z.c),e.Y36(m.xA),e.Y36(g.ez),e.Y36(b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-loan-account-search"]],decls:20,vars:6,consts:[["header","Loan Accounts"],[1,"form-row","form-group"],[1,"col-md-12","text-right"],[1,"btn","btn-warning","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-eye"],[1,"btn","btn-success","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-primary","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-plus"],["routerLink","/dashboard/analytics",1,"btn","btn-danger","btn-sm","mr-1","mb-1"],[1,"fa","fa-times"],[1,"col-12"],["styleClass","p-datatable-sm mt-1 prime-ng-table","responsiveLayout","scroll","selectionMode","single","dataKey","loanId","responsiveLayout","scroll",3,"value","paginator","rows","responsive","selection","loading","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"font-size","12px"],[2,"font-size","12px",3,"pSelectableRow"]],template:function(t,a){1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return a.onView()}),e._UZ(4,"i",4),e._uU(5," View "),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.onEdit()}),e._UZ(7,"i",6),e._uU(8," Edit "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return a.onAdd()}),e._UZ(10,"i",8),e._uU(11," Add "),e.qZA(),e.TgZ(12,"button",9),e._UZ(13,"i",10),e._uU(14," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",11),e.TgZ(17,"p-table",12),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(18,it,23,0,"ng-template",13),e.YNc(19,at,25,17,"ng-template",14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(17),e.Q6J("value",a.data)("paginator",!0)("rows",50)("responsive",!0)("selection",a.selectedData)("loading",a.loading[0]))},directives:[T.s,p.rH,h.iA,g.jx,h.Ei],pipes:[d.JJ,d.uU],styles:[""]}),i})();class E{}function st(i,n){1&i&&(e.TgZ(0,"tr",18),e.TgZ(1,"th"),e._uU(2,"Loan Number"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Ledger Balance"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Status"),e.qZA(),e.qZA())}function ot(i,n){if(1&i&&(e.TgZ(0,"tr",19),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",20),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.loanNumber),e.xp6(2),e.Oqu(e.xi3(5,4,t.ledgerBal,".2")),e.xp6(3),e.Oqu(t.status)}}function rt(i,n){1&i&&e._UZ(0,"span",21)}const lt=function(){return[50,100,150]};let ct=(()=>{class i{constructor(t,a,s,l,c,u){this.alertService=t,this.fb=a,this.dialogService=s,this.ref=l,this.config=c,this.customerRefService=u,this.customerType=[],this.loading=[!1,!1,!1,!1]}ngOnInit(){this.createForms(),this.onSearch()}createForms(){this.form=this.fb.group({id:[null],firstName:[null],phoneNo:[null],status:["ACTIVE"],lastName:[null]})}onSearch(){this.loading[0]=!0,this.customerRefService.findLoanAccounts(this.form.value).pipe((0,f.P)()).subscribe(t=>{this.loading[0]=!1,"00"===t.code?this.data=t.data:this.alertService.displayError(t.message)},t=>{this.loading[0]=!1,this.alertService.displayError(t)})}cancel(){this.ref.close(!1)}submit(){this.ref.close(this.selectedData)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.c),e.Y36(o.qu),e.Y36(m.xA),e.Y36(m.E7),e.Y36(m.S),e.Y36(b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-modal-loan-account-search"]],decls:27,vars:10,consts:[[3,"formGroup"],[1,"row","form-group"],[1,"col-4"],["formControlName","firstName","type","text","placeholder","First Name.",1,"form-control"],["formControlName","phoneNo","type","text","placeholder","First Name",1,"form-control"],["formControlName","lastName","type","text","placeholder","Middle Name",1,"form-control"],[1,"form-row"],[1,"offset-sm-3","col-sm-9","text-right"],["label","Search","styleClass","p-button-success p-button-sm","icon","pi pi-search",3,"loading","onClick"],["label","Select","styleClass","p-button-success p-button-sm","icon","pi pi-check",3,"onClick"],["label","Close","styleClass","p-button-danger p-button-sm","icon","pi pi-times",3,"onClick"],[1,"form-group","form-row"],[1,"col-md-12"],["styleClass","p-datatable-sm mt-3 ml-1 mr-1","responsiveLayout","scroll","selectionMode","single","dataKey","loanId","responsiveLayout","scroll",3,"value","paginator","rows","rowsPerPageOptions","responsive","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],[1,"col-sm-12","text-center"],["style","color: blue;","class","spinner-border spinner-border-sm mr-1 text-center",4,"ngIf"],[2,"font-size","13px"],[2,"font-size","13px",3,"pSelectableRow"],[1,"text-right"],[1,"spinner-border","spinner-border-sm","mr-1","text-center",2,"color","blue"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label"),e._uU(4,"First Name."),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"label"),e._uU(8,"Last Name"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div",2),e.TgZ(11,"label"),e._uU(12,"Loan Number"),e.qZA(),e._UZ(13,"input",5),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"div",7),e.TgZ(16,"p-button",8),e.NdJ("onClick",function(){return a.onSearch()}),e.qZA(),e.TgZ(17,"p-button",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.TgZ(18,"p-button",10),e.NdJ("onClick",function(){return a.cancel()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",11),e.TgZ(20,"div",12),e.TgZ(21,"p-table",13),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(22,st,7,0,"ng-template",14),e.YNc(23,ot,8,7,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",6),e.TgZ(25,"div",16),e.YNc(26,rt,1,0,"span",17),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",a.form),e.xp6(16),e.Q6J("loading",a.loading[0]),e.xp6(5),e.Q6J("value",a.data)("paginator",!0)("rows",50)("rowsPerPageOptions",e.DdM(9,lt))("responsive",!0)("selection",a.selectedData),e.xp6(5),e.Q6J("ngIf",a.loading[0]))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,M.zx,h.iA,g.jx,h.Ei,d.O5],pipes:[d.JJ],styles:[""]}),i})();function ut(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.message," ")}}function dt(i,n){if(1&i&&(e.TgZ(0,"div",16),e.YNc(1,ut,2,1,"div",17),e.qZA()),2&i){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.get("amount").hasError(t.type))}}function pt(i,n){1&i&&e._UZ(0,"span",18)}let mt=(()=>{class i{constructor(t,a,s,l,c,u,x,U,L,Yt){this.route=t,this.router=a,this.alertService=s,this.fb=l,this.datepipe=c,this.customerAPI=u,this.storageService=x,this.securityService=U,this.dialogService=L,this.date=Yt,this.loading=!1,this.submitted=!1,this.customerName=!1,this.selectedData=new E,this.isEdit=!1,this.isView=!1,this.isAddMode=!1,this.enableApprove=!1,this.statusPickList=[],this.categories=[],this.validation_messages={amount:[{type:"required",message:"Credit amount\xa0is\xa0required"}],startDate:[{type:"required",message:"Start date\xa0is\xa0required"}],repayTerm:[{type:"required",message:"Term\xa0is\xa0required"}],repayPeriod:[{type:"required",message:"Frequency\xa0is\xa0required"}],purpose:[{type:"required",message:"Purpose\xa0is\xa0required"}],status:[{type:"required",message:"Status\xa0is\xa0required"}]}}ngOnInit(){this.createForm(),this.onGetCustNo()}ngOnDestroy(){this.storageService.closeEntity()}onGetCustNo(){this.ref=this.dialogService.open(ct,{header:"Get Loan Accounts",width:"40%"}),this.ref.onClose.subscribe(t=>{t?(this.customer=t,this.customerName=!0,this.f.acctNo.setValue(t.loanNumber)):this.onClose()})}assignSelectedCustomerId(t){this.f.custId.setValue(t.id)}createForm(){this.form=this.fb.group({repaymentId:null,acctNo:null,referenceNo:this.datepipe.transform(new Date,"yyyyMMddHHmmss"),amount:[null,o.kI.required],transDate:null,channelCode:null})}get f(){return this.form.controls}determineMaturityDate(){let t=this.f.startDate.value,a=this.f.repayPeriod.value,s=this.f.repayTerm.value;null==t||null==a||null==s||this.f.endDate.setValue(this.date.getNextPeriodDate(t,a,s))}postLoanRepayment(){if(this.submitted=!0,this.form.invalid)return this.alertService.displayInfo("Please fill all the fields"),void(this.loading=!1);this.loading=!0;let t=this.prepareSubmitData();this.customerAPI.postLoanRepayment(t).pipe((0,f.P)()).subscribe(a=>{this.loading=!1,"00"===a.code?(this.alertService.displaySuccess("Repayment posted successfully. Please check the schedules"),this.submitted=!1,this.onClose()):this.alertService.displayError(a.message)},a=>{this.loading=!1,this.submitted=!1,this.alertService.displayError(a)})}prepareSubmitData(){let t=new E;return t.acctNo=this.f.acctNo.value,t.transAmount=this.f.amount.value,t.chargeAmount=0,t.channelCode="WEBCASH-PORTAL",t.postedBy=this.securityService.currentUser.userName,t.transDescr="Loan Repayment ["+this.f.acctNo.value+" ]",t.externalTransRef=this.f.acctNo.value,t}onClose(){this.router.navigate(["webcash/loan-repayment-search"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(Z.c),e.Y36(o.qu),e.Y36(d.uU),e.Y36(b),e.Y36(q.V),e.Y36(J.I),e.Y36(m.xA),e.Y36(I.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-loan-repayment-details"]],decls:29,vars:4,consts:[["header","Loan Repayment"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-sm-10"],["appearance","outline"],["matInput","","autocomplete","off","formControlName","acctNo"],[1,"col-sm-5"],["matInput","","inputmode","numeric","formControlName","amount","autocomplete","off","type","number","placeholder","Repayment Amount."],["class","required-error",4,"ngFor","ngForOf"],["matInput","","readonly","","autocomplete","off","formControlName","referenceNo"],[1,"container"],[1,"row","form-group"],[1,"col-md-10","text-right"],["type","submit","type","button",1,"btn","mr-1","mb-1","btn-primary","btn-sm","btn-border",2,"width","80px",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["type","button","type","button",1,"btn","mr-1","mb-1","btn-danger","btn-sm","btn-border",2,"width","80px",3,"click"],[1,"required-error"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,a){1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return a.postLoanRepayment()}),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"mat-form-field",4),e.TgZ(5,"mat-label"),e._uU(6,"Full Name:"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"div",6),e.TgZ(10,"mat-form-field",4),e.TgZ(11,"mat-label"),e._uU(12,"Repayment Amount."),e.qZA(),e._UZ(13,"input",7),e.YNc(14,dt,2,1,"div",8),e.qZA(),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"mat-form-field",4),e.TgZ(17,"mat-label"),e._uU(18,"Reference No:"),e.qZA(),e._UZ(19,"input",9),e.qZA(),e.qZA(),e.qZA(),e._UZ(20,"hr"),e.TgZ(21,"div",10),e.TgZ(22,"div",11),e.TgZ(23,"div",12),e.TgZ(24,"button",13),e.NdJ("click",function(){return a.postLoanRepayment()}),e.YNc(25,pt,1,0,"span",14),e._uU(26," Post "),e.qZA(),e.TgZ(27,"button",15),e.NdJ("click",function(){return a.onClose()}),e._uU(28,"Close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(13),e.Q6J("ngForOf",a.validation_messages.amount),e.xp6(10),e.Q6J("disabled",a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},directives:[T.s,o._Y,o.JL,o.sg,A.KE,A.hX,N.Nt,o.Fj,o.JJ,o.u,o.wV,d.sg,d.O5],styles:[""]}),i})();function ht(i,n){1&i&&(e.TgZ(0,"tr",12),e.TgZ(1,"th"),e._uU(2,"ID #"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Loan Account"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Reference"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Trans Amount"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Charge Amount"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Channel Code"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Description"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Trans Date"),e.qZA(),e.qZA())}function ft(i,n){if(1&i&&(e.TgZ(0,"tr",13),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"date"),e.qZA(),e.qZA()),2&i){const t=n.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(t.transId),e.xp6(2),e.Oqu(t.acctNo),e.xp6(2),e.Oqu(t.txnRef),e.xp6(2),e.Oqu(e.xi3(9,9,t.transAmount,".2")),e.xp6(3),e.Oqu(e.xi3(12,12,t.chargeAmount,".2")),e.xp6(3),e.Oqu(t.channelCode),e.xp6(2),e.Oqu(t.transDescr),e.xp6(2),e.Oqu(e.lcZ(19,15,t.transDate))}}const gt=[{path:"customer-search",component:Be,data:{title:"Customer Search",breadcrumb:"Customer Search"}},{path:"customer/:id",component:Re,data:{title:"Customer Maintain",breadcrumb:"Customer Maintain"}},{path:"credit-appl-search",component:be,data:{title:"Credit Application",breadcrumb:"Credit Application"}},{path:"credit-appl/:id",component:_e,data:{title:"Credit Maintain",breadcrumb:"Credit Maintain"}},{path:"loan-account-search",component:nt,data:{title:"Agent Outlet",breadcrumb:"Agent Outlet"}},{path:"loan-account/:id",component:tt,data:{title:"Agent Outlet",breadcrumb:"Maintain Loan Account"}},{path:"loan-repayment-search",component:(()=>{class i{constructor(t,a,s,l,c,u){this.router=t,this.storageService=a,this.alertService=s,this.dialogService=l,this.messageService=c,this.globalService=u,this.customerType=[],this.loading=[!1,!1,!1,!1]}ngOnInit(){this.onSearch()}onSearch(){let t=new E;this.loading[0]=!0,this.globalService.findTransHistory(t).pipe((0,f.P)()).subscribe(a=>{this.loading[0]=!1,"00"===a.code?this.data=a.data:this.alertService.displayError(a.message)},a=>{this.loading[0]=!1,this.alertService.displayError(a)})}onAdd(){this.router.navigate(["webcash/loan-repayment","Add"])}exportExcel(){r.e(574).then(r.bind(r,80574)).then(t=>{const s={Sheets:{data:t.utils.json_to_sheet(this.data)},SheetNames:["data"]},l=t.write(s,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(l,"Credit Repayment History")})}saveAsExcelFile(t,a){r.e(592).then(r.t.bind(r,94327,23)).then(s=>{const u=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});s.saveAs(u,a+"_export_"+(new Date).getTime()+".xlsx")})}onEdit(){null!=this.selectedData?(this.storageService.setEntity(this.selectedData),this.router.navigate(["webcash/loan-repayment","Edit"])):this.alertService.displayInfo("No record has been selected")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.F0),e.Y36(q.V),e.Y36(Z.c),e.Y36(m.xA),e.Y36(g.ez),e.Y36(b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-loan-repayment"]],decls:17,vars:6,consts:[["header","Repayment History"],[1,"form-row","form-group"],[1,"col-md-12","text-right"],[1,"btn","btn-primary","btn-sm","mr-1","mb-1",3,"click"],[1,"fa","fa-file-excel-o"],[1,"fa","fa-plus"],["routerLink","/dashboard/analytics",1,"btn","btn-danger","btn-sm","mr-1","mb-1"],[1,"fa","fa-times"],[1,"col-12"],["styleClass","p-datatable-sm mt-1 prime-ng-table","responsiveLayout","scroll","selectionMode","single","dataKey","transId","responsiveLayout","scroll",3,"value","paginator","rows","responsive","selection","loading","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"font-size","12px"],[2,"font-size","12px",3,"pSelectableRow"]],template:function(t,a){1&t&&(e.TgZ(0,"p-panel",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return a.exportExcel()}),e._UZ(4,"i",4),e._uU(5,"Export"),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(){return a.onAdd()}),e._UZ(7,"i",5),e._uU(8," Add "),e.qZA(),e.TgZ(9,"button",6),e._UZ(10,"i",7),e._uU(11," Close "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",1),e.TgZ(13,"div",8),e.TgZ(14,"p-table",9),e.NdJ("selectionChange",function(l){return a.selectedData=l}),e.YNc(15,ht,17,0,"ng-template",10),e.YNc(16,ft,20,17,"ng-template",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(14),e.Q6J("value",a.data)("paginator",!0)("rows",50)("responsive",!0)("selection",a.selectedData)("loading",a.loading[0]))},directives:[T.s,p.rH,h.iA,g.jx,h.Ei],pipes:[d.JJ,d.uU],styles:[""]}),i})(),data:{title:"Agent Outlet",breadcrumb:"Repayment History"}},{path:"loan-repayment/:id",component:mt,data:{title:"Agent Outlet",breadcrumb:"Repayment Details"}},{path:"credit-applic-approval",component:Q,data:{title:"Agent Outlet",breadcrumb:"Credit Approval"}}];let Zt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.Bz.forChild(gt)],p.Bz]}),i})();var At=r(2638),_t=r(47423),vt=r(61620),Tt=r(9224),bt=r(77446),qt=r(48966),Ct=r(43954),yt=r(25245),Nt=r(14623),xt=r(92181),Ut=r(86087),St=r(20773),Dt=r(79814),It=r(32075),wt=r(53251),Mt=r(34594),Et=r(31874),Lt=r(6517);let Ot=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,Zt,_t.ot,Dt.Fk,St.Cq,xt.Tx,bt.p9,wt.Nh,Mt.g0,yt.Ps,At.SJ,Nt.ie,A.lN,Tt.QW,Ct.N6,qt.Is,It.p0,Ut.TU,S.LD,vt.o9,h.U$,M.hJ,T.Q,o.u5,Lt.Yd,o.UX,D.XK,N.c,C.FA,Et.$9]]}),i})()}}]);